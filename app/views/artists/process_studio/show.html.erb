<%#
  Process/Studio Page - Public View
  Displays behind-the-scenes photos and studio content for visitors.
  Based on wireframe: requirements/wireframes/process-studio-preview.html
%>

<% content_for :title, "#{@artist.full_name} - Studio & Process - Clay Companion" %>

<!-- Hero Section -->
<%= render 'artists/studio_hero', artist: @artist, hero_image: @hero_image %>

<!-- Gallery Section -->
<section class="gallery max-w-[1400px] mx-auto px-6 md:px-8 py-12 md:py-16">
  <% if @studio_images.any? %>
    <div class="gallery-grid grid grid-cols-1 md:grid-cols-8 lg:grid-cols-12 gap-8 md:gap-10 lg:gap-12 auto-rows-max">
      <% @studio_images.each_with_index do |image, index| %>
        <%= render 'artists/studio_image_card', image: image, index: index %>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-16">
      <p class="text-lg text-slate">No studio photos available yet.</p>
    </div>
  <% end %>
</section>

<!-- Lightbox Modal -->
<div 
  data-controller="lightbox"
  data-lightbox-images-value="<%= @studio_images.map { |img| { id: img.id.to_s, url: img.image.attached? ? rails_blob_url(img.image) : '', caption: img.caption || '' } }.to_json %>"
  data-action="keydown->lightbox#handleKeyboard"
>
  <%= render 'artists/lightbox' %>
</div>

