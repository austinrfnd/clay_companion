<%#
  Login View
  URL: /login
  
  Displays the login form for artists to authenticate and access their dashboard.
  Matches wireframe specifications from requirements/wireframes/auth/login.md
  
  Features:
  - Email and password inputs
  - Password visibility toggle
  - Remember me checkbox
  - Forgot password link
  - Sign up link
  - Error message display
%>

<div class="auth-page-container">
  <div class="auth-form-container">
    <div class="auth-form-header">
      <h1 class="auth-form-title">Welcome Back</h1>
      <p class="auth-form-subtitle">Sign in to manage your portfolio</p>
    </div>

    <%= form_for(resource, as: resource_name, url: artist_session_path, html: { class: "auth-form" }) do |f| %>
      <div class="auth-form-field">
        <%= f.label :email, "Email Address", class: "auth-form-label" %>
        <%= f.email_field :email, 
            autofocus: true, 
            autocomplete: "email",
            placeholder: "artist@example.com",
            value: params.dig(:artist, :email),
            class: "auth-form-input",
            aria: { required: true } %>
      </div>

      <div class="auth-form-field" data-controller="password-toggle">
        <%= f.label :password, "Password", class: "auth-form-label" %>
        <div class="auth-form-input-wrapper">
          <%= f.password_field :password, 
              autocomplete: "current-password",
              placeholder: "Enter your password",
              class: "auth-form-input auth-form-input-password",
              data: { password_toggle_target: "input" },
              aria: { required: true } %>
          <button type="button" 
                  class="auth-form-password-toggle"
                  data-action="click->password-toggle#toggle"
                  data-password-toggle-target="button"
                  aria-label="Toggle password visibility">
            <span data-password-toggle-target="icon">üëÅÔ∏è</span>
          </button>
        </div>
        <% if alert %>
          <%= error_message(alert, field_id: 'password') %>
        <% end %>
      </div>

      <div class="auth-form-options">
        <% if devise_mapping.rememberable? %>
          <div class="auth-form-checkbox-wrapper">
            <%= f.check_box :remember_me, class: "auth-form-checkbox" %>
            <%= f.label :remember_me, "Remember me", class: "auth-form-checkbox-label" %>
          </div>
        <% end %>

        <div class="auth-form-link-wrapper">
          <%= link_to "Forgot password?", password_reset_request_path, class: "auth-form-link" %>
        </div>
      </div>

      <div class="auth-form-actions">
        <%= f.submit "Sign In", class: "auth-form-submit" %>
      </div>
    <% end %>

    <div class="auth-form-divider"></div>

    <div class="auth-form-footer">
      <p class="auth-form-footer-text">
        Don't have an account?
        <%= link_to "Sign up", new_artist_registration_path, class: "auth-form-footer-link" %>
      </p>
    </div>
  </div>
</div>
